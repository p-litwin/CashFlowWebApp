{% extends "base.html" %}

{% block title %}CashFlowApp - Dodaj wydatek{% endblock %}

{% block footer %}
<script type="text/javascript" src="/js/addExpenseFormValidation.js"></script>
{% endblock %}

{% block body %}

    {% include "/Home/navbar.html"  %}
            <div class="container-fluid main-content pt-4 ps-4">
              
              <div class="card add-expense-income-card">
                <div class="card-header">
                  Podaj dane wydatku
                </div>
                <div class="card-body">
                  <form method="post" id="expenseForm" action="/expenses/add">
                    <input type="hidden" name="user_id" value="{{ current_user.userId }}">
                  
                    <div class="form-outline  mb-4 has-validation">
                      <label class="form-label" for="amount">Kwota</label>
                      <input class="form-control" type="number" id="amount" min="0.00" step="0.01" name="amount"
                      value="{% if expense.amount is not empty %}{{expense.amount}}{% else %}0,00{% endif %}" required>
                    </div>

                    <div class="form-outline mb-4 has-validation">
                      <input class="form-control" type="text" id="expenseDate" name="date"
                        value="{% if expense.date is not empty %}{{expense.date}}{% else %}{{current_date}}{% endif %}"
                        pattern="[0-9]{4}-[0-9]{2}-[0-9]{2}">
                      <label class="form-label" for="expenseDate">Data (RRRR-MM-DD)</label>
                    </div>
                  
 
                  <div class="form-outline mb-4 has-validation">
                      <select class="form-control" id="paymentMethod" name="payment_method" placeholder="Sposób płatności" required>
                        <option value=""></option>
                        {% for method in payment_methods %}
                        <option value="{{ method.id }}">{{ method.name }}</option>
                        {% endfor %}
                      </select>
                      <label class="form-label" for="paymentMethod">Sposób płatności:</label>
                    </div>
               
                    
                    <div class="form-outline mb-4 has-validation">
                      <select class="form-control" id="expenseCategory" placeholder="Kategoria" name="category" required>
                        <option value=""></option>
                        {% for category in expenses_categories %}
                        <option value="{{ category.id }}">{{ category.name }}</option>
                        {% endfor %}
                      </select>
                      <label class="form-label" for="expenseCategory">Kategoria:</label>
                    </div>
                  
                  
                    <div class="form-outline mb-2 has-validation">
                      <textarea class="form-control" id="expenseComment" name="comment" rows="4"></textarea>
                      <label class="form-label" for="expenseComment">Komentarz:</label>
                    </div>
                  
                    <div class="row buttons">
                      <div class="col-6">
                        <button class="btn btn-secondary btn-block btn-lg" type="button">Anuluj</button>
                      </div>
                      <div class="col-6">
                        <button class="btn btn-primary btn-block btn-lg" type="submit">Dodaj</button>
                      </div>
                    </div>
                  </form>
                </div>
              </div>
            </div>
          </section>
{% endblock %}